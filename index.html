<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Sequence Trainer TGAT2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, sans-serif;
        background: linear-gradient(135deg,#1e3c72,#2a5298);
        color: #333;
    }
    .app {
        max-width: 900px;
        margin: auto;
        padding: 20px;
    }
    h1 {
        text-align: center;
        color: #fff;
        margin-bottom: 10px;
    }
    .card {
        background: #fff;
        border-radius: 18px;
        padding: 20px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.25);
        margin-top: 20px;
    }
    .sequence {
        font-size: 26px;
        text-align: center;
        margin: 20px 0;
        letter-spacing: 2px;
    }
    .sequence span {
        padding: 6px 10px;
        border-radius: 8px;
        background: #f0f4f8;
        margin: 0 3px;
        display: inline-block;
    }
    .sequence .q {
        background: #ffeaa7;
        font-weight: bold;
    }
    .input-box {
        text-align: center;
        margin-top: 15px;
    }
    input {
        font-size: 18px;
        padding: 10px 14px;
        width: 200px;
        border-radius: 10px;
        border: 1px solid #ccc;
        text-align: center;
    }
    button {
        font-size: 16px;
        padding: 10px 18px;
        margin: 10px 6px 0 6px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        background: linear-gradient(135deg,#6a11cb,#2575fc);
        color: #fff;
        transition: transform .15s, box-shadow .15s;
    }
    button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0,0,0,.25);
    }
    .result {
        margin-top: 15px;
        text-align: center;
        font-size: 18px;
    }
    .correct { color: #2ecc71; }
    .wrong { color: #e74c3c; }
    .explain {
        margin-top: 15px;
        background: #f7f9fb;
        padding: 15px;
        border-radius: 12px;
        font-size: 15px;
        display: none;
    }
    .footer {
        margin-top: 25px;
        text-align: center;
        color: #fff;
        font-size: 14px;
        opacity: .85;
    }
</style>
</head>
<body>
<div class="app">
    <h1>üéØ ‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏≠‡∏ô‡∏∏‡∏Å‡∏£‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç (TGAT2)</h1>

    <div class="card">
        <div id="status" style="display:flex;justify-content:space-between;align-items:center;font-size:16px;margin-bottom:10px;">
            <div>‚è± ‡πÄ‡∏ß‡∏•‡∏≤: <span id="time">0</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
            <div>‚≠ê ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
        </div>
        <div id="sequence" class="sequence"></div>

        <div class="input-box">
            <input type="number" id="answer" placeholder="‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
            <br>
            <button onclick="checkAnswer()">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            <button onclick="newQuestion()">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡∏°‡πà</button>
            <button onclick="toggleExplain()">‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢</button>
        </div>

        <div id="result" class="result"></div>
        <div id="explain" class="explain"></div>
    </div>

    <div class="footer">‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì + ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏£‡∏£‡∏Å‡∏∞ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≠‡∏ö TGAT2</div>
</div>

<script>
let current = null;
let score = 0;
let time = 0;
let timer = null;
let used = new Set();

function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min;}

function genArithmetic(){
    let a = rand(1,20);
    let d = rand(2,10);
    let seq = [];
    for(let i=0;i<6;i++) seq.push(a+i*d);
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

function genGeometric(){
    let a = rand(1,5);
    let r = rand(2,4);
    let seq=[a];
    for(let i=1;i<6;i++) seq.push(seq[i-1]*r);
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

function genAlternate(){
    let a = rand(1,10);
    let d1 = rand(2,5);
    let d2 = rand(6,10);
    let seq=[a];
    for(let i=1;i<6;i++){
        seq.push(seq[i-1] + (i%2?d1:d2));
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

function genSquare(){
    let start = rand(1,5);
    let seq=[];
    for(let i=0;i<6;i++) seq.push((start+i)**2);
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏Ñ‡∏π‡∏ì‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏ß‡∏Å (√óa + b)
function genMulAdd(){
    let a = rand(1,5);
    let mul = rand(2,4);
    let add = rand(1,10);
    let seq=[a];
    for(let i=1;i<6;i++) seq.push(seq[i-1]*mul + add);
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏π‡∏ì / ‡∏ö‡∏ß‡∏Å
function genAltMulAdd(){
    let a = rand(1,5);
    let mul = rand(2,4);
    let add = rand(3,10);
    let seq=[a];
    for(let i=1;i<6;i++){
        seq.push(i%2 ? seq[i-1]*mul : seq[i-1]+add);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ
function genGrowingDiff(){
    let a = rand(1,10);
    let diff = rand(1,4);
    let seq=[a];
    for(let i=1;i<6;i++){
        seq.push(seq[i-1] + diff);
        diff++;
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡πÅ‡∏¢‡∏Å‡∏û‡∏à‡∏ô‡πå‡∏Ñ‡∏µ‡πà-‡∏Ñ‡∏π‡πà
function genOddEven(){
    let odd = rand(1,5);
    let even = rand(10,20);
    let seq=[];
    for(let i=0;i<6;i++){
        seq.push(i%2===0 ? odd+=2 : even+=3);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á (second difference)
function genSecondDiff(){
    let a = rand(1,10);
    let d1 = rand(1,4);
    let d2 = rand(1,3);
    let seq=[a];
    let diff = d1;
    for(let i=1;i<6;i++){
        seq.push(seq[i-1] + diff);
        diff += d2;
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏π‡∏ï‡∏£ 2 ‡∏ä‡∏±‡πâ‡∏ô
function genTwoRule(){
    let a = rand(1,5);
    let seq=[a];
    for(let i=1;i<6;i++){
        if(i%2===1) seq.push(seq[i-1]*2 + 1);
        else seq.push(seq[i-1] + 5);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢
function genUnitDigit(){
    let a = rand(10,50);
    let seq=[a];
    for(let i=1;i<6;i++){
        let inc = (i%2===0)?7:13;
        let next = seq[i-1] + inc;
        if(next%10===0) next += 5;
        seq.push(next);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏ú‡∏™‡∏° 3 ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö (‡∏Ñ‡∏π‡∏ì / ‡∏ö‡∏ß‡∏Å / ‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á)
function genHybrid(){
    let a = rand(1,4);
    let seq=[a];
    for(let i=1;i<6;i++){
        let next = seq[i-1]*2 + i;
        if(i%3===0) next += i*i;
        seq.push(next);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏≠‡∏ô‡∏∏‡∏Å‡∏£‡∏°‡∏ã‡πà‡∏≠‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö (‡πÉ‡∏ä‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏≥‡∏´‡∏ô‡∏î)
function genIndexRule(){
    let a = rand(5,15);
    let seq=[a];
    for(let i=1;i<6;i++){
        let next = seq[i-1] + (i%2===0 ? i*2 : i+3);
        seq.push(next);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}

// ‡∏≠‡∏ô‡∏∏‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏≠‡∏Å (‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà)
function genTrap(){
    let a = rand(1,10);
    let seq=[a];
    let d = rand(2,4);
    for(let i=1;i<6;i++){
        d += (i%2===0)?1:2;
        seq.push(seq[i-1] + d);
    }
    return {
        seq, answer: seq[5],
        explain: `‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: 1`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏à‡∏ô‡πå‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡∏ï‡∏±‡∏ß‡∏Ñ‡∏π‡∏ì / ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏û‡∏à‡∏ô‡πå ‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£`
            + `
‡∏Ç‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÉ‡∏ä‡πâ‡∏Å‡∏é‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏û‡∏à‡∏ô‡πå‡∏ñ‡∏±‡∏î‡πÑ‡∏õ`
    };
}


function newQuestion(){
    if(!timer){
        timer = setInterval(()=>{
            time++;
            document.getElementById('time').innerText = time;
        },1000);
    }
    document.getElementById('result').innerHTML='';
    document.getElementById('answer').value='';
    document.getElementById('explain').style.display='none';

    let gens=[
        genArithmetic,
        genGeometric,
        genAlternate,
        genSquare,
        genMulAdd,
        genAltMulAdd,
        genGrowingDiff,
        genOddEven,
        genSecondDiff,
        genTwoRule,
        genUnitDigit,
        genHybrid,
        genIndexRule,
        genTrap
    ];
    let q;
    do{
        q = gens[rand(0,gens.length-1)]();
    }while(used.has(q.seq.join(',')));

    used.add(q.seq.join(','));
    current=q;

    let html='';
    for(let i=0;i<q.seq.length;i++){
        if(i===q.seq.length-1) html+=`<span class="q">?</span>`;
        else html+=`<span>${q.seq[i]}</span>`;
    }
    document.getElementById('sequence').innerHTML=html;
    document.getElementById('explain').innerHTML=`<b>‡πÄ‡∏â‡∏•‡∏¢:</b> ${q.answer}<br>${q.explain}<hr><b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</b><br>${generateMethod(q.seq)}`;
}

function checkAnswer(){
    if(!current) return;
    let val = Number(document.getElementById('answer').value);
    let res = document.getElementById('result');

    if(val===current.answer){
        score += 10;
        document.getElementById('score').innerText = score;
        res.innerHTML='‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å';
        res.className='result correct';
    }else{
        res.innerHTML='‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å ‡∏•‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà';
        res.className='result wrong';
    }
}

function toggleExplain(){
    let ex = document.getElementById('explain');
    ex.style.display = ex.style.display==='none'?'block':'none';
}

function generateMethod(seq){
    let steps = [];
    for(let i=1;i<seq.length;i++){
        let diff = seq[i]-seq[i-1];
        let ratio = seq[i-1]!==0 && seq[i]%seq[i-1]===0 ? seq[i]/seq[i-1] : null;
        if(ratio && ratio!==1){
            steps.push(`‡∏û‡∏à‡∏ô‡πå‡∏ó‡∏µ‡πà ${i} ‚Üí ${i+1}: √ó${ratio}`);
        } else {
            steps.push(`‡∏û‡∏à‡∏ô‡πå‡∏ó‡∏µ‡πà ${i} ‚Üí ${i+1}: +${diff}`);
        }
    }
    return steps.join('<br>');
}

newQuestion();
</script>
</body>
</html>
